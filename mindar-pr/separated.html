<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>منفصل</title>

  <script src="libs/aframe.min.js"></script>
<script src="libs/mindar-image-aframe.prod.js"></script>

  <style>
    body{ margin:0; font-family: Arial, sans-serif; }
    #fsVideo{ position:fixed; inset:0; background:#000; z-index:9999; display:none; }
    #fsVideo button{ position:absolute; top:12px; right:12px; z-index:10000; background:#fff; border:0; padding:10px 12px; border-radius:10px; cursor:pointer; }
    #lessonVideo{ width:100%; height:100%; }
  </style>
</head>

<body>
  <div id="fsVideo">
    <button onclick="closeFS()">رجوع</button>
    <video id="lessonVideo" controls playsinline>
      <source src="assets/lesson.mp4" type="video/mp4">
    </video>
  </div>

  <a-scene
    mindar-image="imageTargetSrc: assets/target.mind; autoStart: true;"
    vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: true">

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
    <a-entity id="target" mindar-image-target="targetIndex: 0"></a-entity>
  </a-scene>

  <script>
    function openFS(){
      document.getElementById('fsVideo').style.display = 'block';
      const v = document.getElementById('lessonVideo');
      v.currentTime = 0;
      v.play().catch(()=>{});
    }
    function closeFS(){
      const v = document.getElementById('lessonVideo');
      v.pause();
      document.getElementById('fsVideo').style.display = 'none';
    }
    document.addEventListener("DOMContentLoaded", () => {
      const targetEntity = document.getElementById("target");
      targetEntity.addEventListener("targetFound", () => openFS());
    });
  </script>
</body>
</html>
